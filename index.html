<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telegram Gift Auction</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#111;
  color:#fff;
  padding:20px;
}
h1 { margin-bottom:10px }
.card {
  background:#1c1c1c;
  padding:15px;
  border-radius:10px;
  margin-bottom:15px;
}
input, button {
  width:100%;
  padding:12px;
  margin-top:10px;
  font-size:16px;
  border-radius:8px;
  border:none;
}
button {
  background:#0d6efd;
  color:#fff;
}
button.secondary {
  background:#198754;
}
.info span {
  font-weight:bold;
}
#overlay {
  display:none;
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:#0d6efd;
  color:white;
  z-index:9999;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
}
#overlay button {
  background:#fff;
  color:#000;
  margin-top:20px;
}
</style>
</head>

<body>

<h1>üéÅ Telegram Gift Auction</h1>

<div class="card">
  <p>–õ–æ—Ç: <span id="title"></span></p>
  <p>–¶–µ–Ω–∞: $<span id="price"></span></p>
  <p>–ü–æ—Å–ª–µ–¥–Ω–∏–π: <span id="last"></span></p>
  <p>‚è± –û—Å—Ç–∞–ª–æ—Å—å: <span id="time"></span> —Å–µ–∫</p>
</div>

<div class="card">
  <input
    id="bidInput"
    type="number"
    placeholder="–í–∞—à–∞ —Å—Ç–∞–≤–∫–∞"
    inputmode="numeric"
    enterkeyhint="done"
  >
  <button onclick="makeBid()">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
</div>

<div class="card">
  <p>üí≥ –ë–∞–ª–∞–Ω—Å: $<span id="balance"></span></p>
  <button class="secondary" onclick="resell()">–ü–µ—Ä–µ–ø—Ä–æ–¥–∞—Ç—å –ª–æ—Ç</button>
</div>

<!-- OVERLAY -->
<div id="overlay">
  <div id="overlayText"></div>
  <button onclick="closeOverlay()">–í—ã–π—Ç–∏</button>
</div>

<script>
const lots = [
  "üöó Tesla Model X",
  "üè† Luxury House",
  "üíé Diamond Watch",
  "üèù Private Villa",
  "üì± iPhone Ultra"
];

const player = {
  name: "You",
  balance: 10000,
  inventory: []
};

const bots = Array.from({ length: 3 + Math.floor(Math.random() * 3) }).map((_, i) => ({
  name: "Bot_" + (i + 1),
  balance: 3000 + Math.floor(Math.random() * 6000)
}));

let lot = {};
let finished = false;

/* ===== NEW LOT (INVERTER) ===== */
function newLot(owner = "-") {
  lot = {
    title: lots[Math.floor(Math.random() * lots.length)],
    price: 500 + Math.floor(Math.random() * 500),
    last: owner,
    endsAt: Date.now() + 30_000
  };
  finished = false;

  title.textContent = lot.title;
  price.textContent = lot.price;
  last.textContent = lot.last;
}
newLot();

/* ===== BID ===== */
function makeBid() {
  const value = Number(bidInput.value);
  if (value > lot.price && value <= player.balance) {
    lot.price = value;
    lot.last = player.name;
    price.textContent = lot.price;
    last.textContent = lot.last;
  }
  bidInput.value = "";
}

/* ===== BOTS ===== */
setInterval(() => {
  if (finished) return;
  bots.forEach(bot => {
    if (Math.random() < 0.3) {
      const bid = lot.price + 50 + Math.floor(Math.random() * 200);
      if (bid <= bot.balance) {
        lot.price = bid;
        lot.last = bot.name;
        price.textContent = lot.price;
        last.textContent = lot.last;
      }
    }
  });
}, 3000);

/* ===== TIMER ===== */
setInterval(() => {
  if (finished) return;
  const left = Math.max(0, Math.floor((lot.endsAt - Date.now()) / 1000));
  time.textContent = left;
  if (left === 0) finish();
}, 1000);

/* ===== FINISH ===== */
function finish() {
  finished = true;

  if (lot.last === player.name) {
    player.balance -= lot.price;
    player.inventory.push(lot.title);
    showOverlay(`üéâ –ü–û–ó–î–†–ê–í–õ–Ø–ï–ú!<br><br>${lot.title}<br>–¶–µ–Ω–∞: $${lot.price}`);
  }

  balance.textContent = player.balance;
  setTimeout(() => newLot(lot.last), 3000);
}

/* ===== RESELL ===== */
function resell() {
  if (player.inventory.length === 0) return;
  const item = player.inventory.pop();
  const profit = 500 + Math.floor(Math.random() * 1000);
  player.balance += profit;
  balance.textContent = player.balance;
  showOverlay(`üí∞ –ü–ï–†–ï–ü–†–û–î–ê–ñ–ê<br><br>${item}<br>+ $${profit}`);
}

/* ===== OVERLAY ===== */
function showOverlay(text) {
  overlay.style.display = "flex";
  overlayText.innerHTML = text;
}
function closeOverlay() {
  overlay.style.display = "none";
}

/* INIT */
balance.textContent = player.balance;
</script>

</body>
</html>
