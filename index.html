<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Telegram Gift Auction</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
  padding: 20px;
}
h1 { text-align: center; }

.card {
  background: white;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,.1);
}

input {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  margin: 8px 0;
}

button {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  background: #0088cc;
  color: white;
  border: none;
  border-radius: 6px;
}

.info { margin-top: 8px; font-size: 15px; }
.win { color: green; font-weight: bold; }
</style>
</head>

<body>

<h1>üéÅ Telegram Gift Auction</h1>

<div class="card">
  <h2 id="title"></h2>
  <div class="info">üí∞ –°—Ç–∞–≤–∫–∞: $<span id="price"></span></div>
  <div class="info">‚è± –í—Ä–µ–º—è: <span id="time"></span> —Å–µ–∫</div>
  <div class="info">üëë –ü–æ—Å–ª–µ–¥–Ω–∏–π: <span id="last"></span></div>

  <input id="bidInput" type="number" inputmode="numeric" placeholder="–í–∞—à–∞ —Å—Ç–∞–≤–∫–∞" />
  <button onclick="makeBid()">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
</div>

<div class="card">
  <div class="info">üí≥ –ë–∞–ª–∞–Ω—Å: $<span id="balance"></span></div>
  <div id="message" class="info"></div>
</div>

<script>
/* ===== DATA ===== */
const lots = [
  "üöó Tesla Model X",
  "üè† Luxury House",
  "üíé Diamond Watch",
  "üèù Private Villa",
  "üì± iPhone Ultra"
];

const player = { name: "You", balance: 10000 };

const bots = Array.from({ length: Math.floor(Math.random() * 3) + 3 }).map((_, i) => ({
  name: "Bot_" + (i + 1),
  balance: Math.floor(Math.random() * 8000) + 3000
}));

let lot;

/* ===== CREATE LOT ===== */
function newLot(owner = null, price = null) {
  lot = {
    title: lots[Math.floor(Math.random() * lots.length)],
    price: price || Math.floor(Math.random() * 500) + 500,
    last: owner,
    endsAt: Date.now() + 30_000
  };
  document.getElementById("message").textContent = "";
}
newLot();

/* ===== RENDER ===== */
function render() {
  document.getElementById("title").textContent = lot.title;
  document.getElementById("price").textContent = lot.price;
  document.getElementById("last").textContent = lot.last || "-";
  document.getElementById("balance").textContent = player.balance;

  const left = Math.max(0, Math.floor((lot.endsAt - Date.now()) / 1000));
  document.getElementById("time").textContent = left;

  if (left === 0) finish();
}

/* ===== BID ===== */
function makeBid() {
  const input = document.getElementById("bidInput");
  const value = Number(input.value);

  if (value > lot.price && value <= player.balance) {
    lot.price = value;
    lot.last = player.name;
  }
  input.value = "";
}

/* ===== BOTS ===== */
setInterval(() => {
  bots.forEach(bot => {
    if (Math.random() < 0.35 && bot.balance > lot.price) {
      const bid = lot.price + Math.floor(Math.random() * 300) + 50;
      if (bid <= bot.balance) {
        lot.price = bid;
        lot.last = bot.name;
      }
    }
  });
}, 3000);

/* ===== FINISH ===== */
function finish() {
  if (!lot.finished) {
    lot.finished = true;

    if (lot.last === player.name) {
      player.balance -= lot.price;
      document.getElementById("message").innerHTML =
        `üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ <b>${lot.title}</b> –∑–∞ $${lot.price}!`;
    } else if (lot.last) {
      document.getElementById("message").textContent =
        `‚ùå –ü–æ–±–µ–¥–∏–ª ${lot.last}`;
    }

    setTimeout(() => newLot(lot.last, lot.price + 200), 3000);
  }
}

/* ===== LOOP ===== */
setInterval(render, 1000);
</script>

</body>
</html>
