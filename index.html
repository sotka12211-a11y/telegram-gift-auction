<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Telegram Gift Auction</title>
  <style>
    body { font-family: Arial; background:#f4f6f8; padding:20px }
    .card { background:#fff; padding:20px; border-radius:10px; margin-bottom:20px }
    button { padding:10px; width:100% }
  </style>
</head>
<body>

<h1>Telegram Gift Auction</h1>

<div class="card">
  <h2 id="title"></h2>
  <p>üí∞ –°—Ç–∞–≤–∫–∞: $<span id="price"></span></p>
  <p>‚è± –í—Ä–µ–º—è: <span id="time"></span> —Å–µ–∫</p>
  <p>üëë –ü–æ—Å–ª–µ–¥–Ω–∏–π: <span id="last"></span></p>

  <input id="amount" placeholder="–í–∞—à–∞ —Å—Ç–∞–≤–∫–∞" />
  <button onclick="bid()">–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
</div>

<div class="card">
  üí≥ –ë–∞–ª–∞–Ω—Å: $<span id="balance"></span>
</div>

<script>
async function load() {
  const r = await fetch('http://localhost:3000/state');
  const d = await r.json();

  title.innerText = d.lot.title;
  price.innerText = d.lot.price;
  time.innerText = d.timeLeft;
  last.innerText = d.lastBid ? d.lastBid.user : '‚Äî';
  balance.innerText = d.balance;
}

async function bid() {
  const amount = +document.getElementById('amount').value;
  await fetch('http://localhost:3000/bid', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ amount })
  });
}

setInterval(load, 1000);
load();
</script>

</body>
</html>
